<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ln-110-documents-pipeline - State Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="../shared/css/diagram.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¯ ln-110-documents-pipeline</h1>
            <p class="subtitle">Documentation Pipeline Orchestrator - State Diagram</p>
        </header>

        <div class="info-box">
            <h3>ðŸ“‹ Workflow Overview</h3>
            <ul>
                <li><strong>Purpose:</strong> Create complete documentation system (CLAUDE.md + docs/ + presentation/) in one command</li>
                <li><strong>Orchestrates:</strong> 6 workers (ln-111 â†’ ln-112 â†’ ln-113 â†’ ln-114 â†’ ln-115 â†’ ln-116)</li>
                <li><strong>Phases:</strong> 5 phases (Phase 1 User Confirmation â†’ Phase 2 Worker Invocation â†’ Phase 4 Global Cleanup â†’ Phase 5 Summary)</li>
                <li><strong>Error handling:</strong> Stops if any invoked worker fails</li>
            </ul>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color color-action"></div>
                <span>Orchestration Action</span>
            </div>
            <div class="legend-item">
                <div class="legend-color color-decision"></div>
                <span>Completion Check</span>
            </div>
            <div class="legend-item">
                <div class="legend-color color-error"></div>
                <span>Error State</span>
            </div>
        </div>

        <div class="diagram-container">
            <div class="mermaid">
graph TD
    Start([Start: ln-110-documents-pipeline]) --> Phase1[Phase 1: User Confirmation<br/>Explain workflow + get approval]

    Phase1 --> Approved{User<br/>approved?}
    Approved -->|No| Cancelled([Cancelled by user])
    Approved -->|Yes| W1[Phase 2.1: Invoke ln-111-root-docs-creator<br/>CLAUDE.md + docs/README.md]

    W1 --> W1Check{ln-111<br/>completed?}
    W1Check -->|No| Error[Error: Worker failed]
    W1Check -->|Yes| W2[Phase 2.2: Invoke ln-112-reference-docs-creator<br/>docs/reference/ structure]

    W2 --> W2Check{ln-112<br/>completed?}
    W2Check -->|No| Error
    W2Check -->|Yes| W3[Phase 2.3: Invoke ln-113-tasks-docs-creator<br/>docs/tasks/ + kanban_board.md]

    W3 --> W3Check{ln-113<br/>completed?}
    W3Check -->|No| Error
    W3Check -->|Yes| W4[Phase 2.4: Invoke ln-114-project-docs-creator<br/>docs/project/ documentation]

    W4 --> W4Check{ln-114<br/>completed?}
    W4Check -->|No| Error
    W4Check -->|Yes| W5[Phase 2.5: Invoke ln-115-presentation-creator<br/>docs/presentation/ HTML]

    W5 --> W5Check{ln-115<br/>completed?}
    W5Check -->|No| Error
    W5Check -->|Yes| W6[Phase 2.6: Invoke ln-116-test-docs-creator<br/>tests/README.md optional]

    W6 --> W6Check{ln-116<br/>completed?}
    W6Check -->|No| Error
    W6Check -->|Yes| Phase4[Phase 4: Global Cleanup<br/>Deduplication + Orphan removal<br/>Consolidation + Cross-link validation]

    Phase4 --> Phase4Check{Phase 4<br/>completed?}
    Phase4Check -->|No| Error
    Phase4Check -->|Yes| Summary[Phase 5: Summary<br/>Display completion report]

    Summary --> End([End: Documentation created])
    Error --> End
    Cancelled --> End

    %% Styling
    classDef action fill:#C8E6C9,stroke:#388E3C,stroke-width:2px
    classDef decision fill:#FFE0B2,stroke:#E64A19,stroke-width:2px
    classDef error fill:#FFCDD2,stroke:#C62828,stroke-width:2px

    class Phase1,W1,W2,W3,W4,W5,W6,Phase4,Summary action
    class Approved,W1Check,W2Check,W3Check,W4Check,W5Check,W6Check,Phase4Check decision
    class Error error
            </div>
        </div>

        <div class="info-box">
            <h3>ðŸ”‘ Key Features</h3>
            <ul>
                <li><strong>One Command:</strong> Creates entire documentation system in single invocation</li>
                <li><strong>Sequential Execution:</strong> 6 workers invoked in order (15-20 minutes total)</li>
                <li><strong>Global Cleanup:</strong> Phase 4 removes duplicates, orphaned files, consolidates knowledge, validates cross-links</li>
                <li><strong>Domain Separation:</strong> Each worker creates specific documentation area</li>
                <li><strong>Error Handling:</strong> Stops execution if any worker fails, shows partial progress</li>
            </ul>
        </div>

        <footer>
            <p>Generated for ln-110-documents-pipeline skill | Version 6.0.0</p>
            <p>Diagram format: Mermaid.js | Last updated: 2025-11-18</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
